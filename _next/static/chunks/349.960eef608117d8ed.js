"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[349],{3349:function(e,r,t){t.r(r),t.d(r,{default:function(){return c}});var i=t(5893),o=t(2237),n=t(1394),s=t(5675),l=t.n(s),a={src:"/_next/static/media/mock-map.e1b0bb2c.png",height:502,width:472,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAANlBMVEV6eH1XWm2EgHh/f4mEfYZpbHdfXm1tb3xjZXNzdH1RVWSIhok9RFqRj4NJUGOIdXppZHOhlIKmPOSfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nAXBhwHAIAzAMAcy2f3/2Uq0ex5IsdqsJeOxYn95gPRx94zEtazToLpIhTdMLU274kGOGfEDRGQBuQ5a2+UAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d=t(278),h=t(5871);function c(){let[e,r]=(0,n.x)(1),[t,s]=(0,n.x)("draw"),[c,f]=(0,n.x)({1:{coord:[],finishDraw:!1},2:{coord:[],finishDraw:!1},3:{coord:[],finishDraw:!1}}),A=c[e],b=Object.entries(c),[u,x]=(0,n.x)([]),[w,g]=(0,n.x)(0);return(0,i.jsxs)(h.Z,{children:["Current area: ",e,(0,i.jsxs)(d.Z,{children:[(0,i.jsx)("button",{onClick:()=>{r(1),s(c[1].finishDraw?"move":"draw")},disabled:1===e,children:"Area 1"}),(0,i.jsx)("button",{onClick:()=>{r(2),s(c[2].finishDraw?"move":"draw")},disabled:2===e,children:"Area 2"}),(0,i.jsx)("button",{onClick:()=>{r(3),s(c[3].finishDraw?"move":"draw")},disabled:3===e,children:"Area 3"})]}),"Mode: ",t,(0,i.jsxs)(d.Z,{children:[(0,i.jsx)("button",{onClick:()=>s("draw"),disabled:"draw"===t||A.finishDraw,children:"Draw"}),(0,i.jsx)("button",{onClick:()=>s("move"),disabled:"move"===t||!A.finishDraw,children:"Move"}),(0,i.jsx)("button",{onClick:()=>{f(r=>{r[e].coord=[],r[e].finishDraw=!1,s("draw")})},disabled:!A.finishDraw,children:"delete"}),"draw"===t&&(0,i.jsxs)(i.Fragment,{children:[" ","|"," ",(0,i.jsx)("button",{onClick:()=>{f(r=>{r[e].coord.splice(-1)})},disabled:0===A.coord.length,children:"undo"})]})]}),(0,i.jsxs)(d.Z,{position:"relative",sx:{cursor:"draw"===t?"crosshair":"pointer"},children:[(0,i.jsx)(l(),{src:a,alt:"",width:500,height:500}),(0,i.jsxs)(o.Hf,{width:500,height:500,style:{border:"1px solid black",display:"inline-flex",position:"absolute",left:0,top:0},onClick:r=>{if("draw"!==t)return;let i=A.coord,o=r.evt.offsetX,n=r.evt.offsetY;if(i.length>0){let r=Math.abs(o-i[0].x),t=Math.abs(n-i[0].y);if(r<10&&t<10){f(r=>{r[e].coord.push({x:i[0].x,y:i[0].y}),r[e].finishDraw=!0}),s("move");return}}f(r=>{r[e].coord.push({x:o,y:n})})},children:[b.map(r=>{let[n,{coord:s,finishDraw:l}]=r;return(0,i.jsx)(o.mh,{children:s.length>0&&(0,i.jsx)(o.bn,{sceneFunc:function(e){for(let[r,{x:t,y:i}]of(e.beginPath(),e.moveTo(s[0].x,s[0].y),Object.entries(s)))0!==Number(r)&&e.lineTo(t,i);l&&e.closePath(),e.fillStrokeShape(this)},stroke:"rgba(27, 163, 156, ".concat(Number(n)===e?1:.5,")"),strokeWidth:3,fill:l?"rgba(101, 198, 187, ".concat(Number(n)===e?.8:.5,")"):"rgba(0, 0, 0, 0)",draggable:e===Number(n)&&"move"===t,onDragStart:e=>{let r=e.evt.offsetX,t=e.evt.offsetY;console.log(r,t),x(e=>{e[0]=[r,t]})},onDragEnd:r=>{let t=r.evt.offsetX,i=r.evt.offsetY;console.log(t,i);let o=t-u[0][0],n=i-u[0][1],l=[];for(let{x:e,y:r}of s)l.push({x:e+o,y:r+n});f(r=>{r[e].coord=l}),g(w+1)},style:{pointer:"cursor"}})},n)}),"draw"===t&&(0,i.jsx)(o.mh,{children:A.coord.map((e,r)=>{let{x:t,y:n}=e;return(0,i.jsx)(o.Cd,{radius:6,x:t,y:n,fill:"white",stroke:"green",strokeWidth:2},r)})})]},w)]})]})}}}]);